<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KI-Grundlagen: Das Netzwerk</title>

    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            background-color: #0f172a;
            /* Slate 900 */
            color: #e2e8f0;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            /* Prevent scrolling on the main map */
            touch-action: none;
            /* Prevent rubber-banding on mobile */
        }

        .node-container {
            position: absolute;
            transform: translate(-50%, -50%);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            z-index: 10;
            -webkit-tap-highlight-color: transparent;
        }

        .node-circle {
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #1e293b;
            border: 2px solid #334155;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        .node-container:hover .node-circle,
        .node-container:active .node-circle {
            transform: scale(1.1);
            border-color: #60a5fa;
            box-shadow: 0 0 30px rgba(96, 165, 250, 0.4);
        }

        .node-label {
            margin-top: 8px;
            text-align: center;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9);
            background-color: rgba(15, 23, 42, 0.85);
            padding: 4px 10px;
            border-radius: 8px;
            white-space: nowrap;
            font-size: 0.8rem;
            backdrop-filter: blur(2px);
        }

        @media (min-width: 768px) {
            .node-label {
                font-size: 0.95rem;
                padding: 4px 12px;
                margin-top: 12px;
            }
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(59, 130, 246, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
            }
        }

        .agent-pulse {
            animation: pulse-glow 2s infinite;
        }

        .connections-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .connection-line {
            stroke: #334155;
            stroke-width: 2;
            stroke-dasharray: 8;
            animation: dash 60s linear infinite;
            transition: all 0.5s ease;
        }

        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }

        /* Modal Styles */
        .overlay-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            padding: 1rem;
        }

        .overlay-backdrop.active {
            opacity: 1;
            pointer-events: auto;
        }

        .overlay-content {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 16px;
            width: 100%;
            max-width: 800px;
            max-height: 85vh;
            overflow: hidden;
            display: flex;
            /* Flex context for positioning */
            flex-direction: column;
            position: relative;
            /* Anchor for absolute button */
            transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
        }

        .overlay-backdrop.active .overlay-content {
            transform: scale(1);
        }

        /* New inner scroll container */
        .overlay-scroll-area {
            overflow-y: auto;
            height: 100%;
            width: 100%;
        }

        .overlay-scroll-area::-webkit-scrollbar {
            width: 6px;
        }

        .overlay-scroll-area::-webkit-scrollbar-track {
            background: #0f172a;
        }

        .overlay-scroll-area::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }
    </style>
</head>

<body>

    <div id="root"></div>

    <script type="text/babel">
        // --- Icons ---
        const BrainIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z" /><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z" /></svg>
        );
        const BotIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 8V4H8" /><rect width="16" height="12" x="4" y="8" rx="2" /><path d="M2 14h2" /><path d="M20 14h2" /><path d="M15 13v2" /><path d="M9 13v2" /></svg>
        );
        const BriefcaseIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="7" rx="2" ry="2" /><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" /></svg>
        );
        const PlugIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 22v-5" /><path d="M9 8V2" /><path d="M15 8V2" /><path d="M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z" /></svg>
        );
        const FileTextIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" /><polyline points="14 2 14 8 20 8" /><line x1="16" x2="8" y1="13" y2="13" /><line x1="16" x2="8" y1="17" y2="17" /><line x1="10" x2="8" y1="9" y2="9" /></svg>
        );
        const XIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18" /><path d="M6 6 18 18" /></svg>
        );
        const InfoIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10" /><path d="M12 16v-4" /><path d="M12 8h.01" /></svg>
        );

        const App = () => {
            const [activeId, setActiveId] = React.useState(null);
            const [isMobile, setIsMobile] = React.useState(window.innerWidth < 768);

            React.useEffect(() => {
                const handleResize = () => {
                    setIsMobile(window.innerWidth < 768);
                };
                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const getPositions = () => {
                if (isMobile) {
                    return {
                        model: { x: 50, y: 18 },      // War 15, etwas tiefer
                        agent: { x: 50, y: 49 },      // War 50, fast mittig
                        gem: { x: 18, y: 46 },        // War 45, leicht angepasst
                        extensions: { x: 82, y: 46 }, // War 45, leicht angepasst
                        rag: { x: 50, y: 75 }         // War 80, deutlich höher (gestaucht)
                    };
                }
                return {
                    model: { x: 50, y: 20 },
                    agent: { x: 50, y: 50 },
                    gem: { x: 20, y: 50 },
                    extensions: { x: 80, y: 50 },
                    rag: { x: 50, y: 80 }
                };
            };

            const positions = getPositions();

            const concepts = [
                {
                    id: 'model',
                    title: 'Das Modell',
                    subtitle: 'Das Gehirn',
                    icon: <BrainIcon className="w-8 h-8 md:w-10 md:h-10 text-purple-400" />,
                    color: 'border-purple-500 shadow-purple-500/20',
                    pos: positions.model,
                    description: 'Das Modell ist ein riesiges, statisches Programm, das Sprache versteht und erzeugen kann. Es ist wie eine Enzyklopädie, die sprechen kann, aber von allein nichts tut.',
                    analogy: 'Ihr Universitätsabschluss oder Ihr IQ. Das reine Potenzial und Wissen.',
                    example: 'GPT-5.1, Claude 4.5 Sonnet, Gemini 3 Pro.',
                    techDetails: [
                        { title: 'Large Language Model (LLM)', desc: 'Ein neuronales Netz, das statistische Wahrscheinlichkeiten von Wortfolgen berechnet.' },
                    ]
                },
                {
                    id: 'agent',
                    title: 'Der Agent',
                    subtitle: 'Mitarbeiter',
                    icon: <BotIcon className="w-8 h-8 md:w-10 md:h-10 text-blue-400" />,
                    color: 'border-blue-500 shadow-blue-500/20',
                    pos: positions.agent,
                    isCenter: true,
                    description: 'Der Agent ist die aktive Instanz. Er nutzt das Modell zum "Denken", kann aber Entscheidungen treffen und Werkzeuge benutzen.',
                    analogy: 'Der Kollege am Schreibtisch, der den Hörer abnimmt und Aufgaben erledigt.',
                    example: 'Der Chat, der aktiv wird: "Ich habe den Termin für Sie gebucht."',
                    techDetails: [
                        { title: 'AI Agent', desc: 'Das Softwaresystem, das Wahrnehmung in Aktionen umsetzt.' },
                        { title: 'Autonomous Loop', desc: 'Die Schleife aus "Denken", "Handeln" und "Prüfen", die autonom abläuft.' }
                    ]
                },
                {
                    id: 'gem',
                    title: 'Gem / Projekt',
                    subtitle: 'Die Rolle',
                    icon: <BriefcaseIcon className="w-8 h-8 md:w-10 md:h-10 text-orange-400" />,
                    color: 'border-orange-500 shadow-orange-500/20',
                    pos: positions.gem,
                    description: 'Eine gespeicherte Konfiguration. Hier legen Sie fest, wer der Agent sein soll und worauf er sich fokussieren muss.',
                    analogy: 'Die Stellenbeschreibung oder der "Hut", den der Mitarbeiter aufsetzt.',
                    example: 'Ein "Marketing-Gem", das nur in Tonalität Ihrer Marke schreibt.',
                    techDetails: [
                        { title: 'System Prompt', desc: 'Die initiale "Regieanweisung", die das Verhalten der KI definiert.' },
                        { title: 'Context Window', desc: 'Der Kurzzeitspeicher für den aktuellen Gesprächsverlauf.' }
                    ]
                },
                {
                    id: 'extensions',
                    title: 'Werkzeuge',
                    subtitle: 'Hände',
                    icon: <PlugIcon className="w-8 h-8 md:w-10 md:h-10 text-green-400" />,
                    color: 'border-green-500 shadow-green-500/20',
                    pos: positions.extensions,
                    description: 'Verbindungen zur Außenwelt. Ohne diese kann die KI nur reden. Mit ihnen kann sie in Ihre Systeme greifen.',
                    analogy: 'Fest installierte Werkzeuge (Telefon) oder Universal-Anschlüsse (USB).',
                    example: 'Der Agent nutzt Google Maps oder greift direkt auf die Datenbank zu.',
                    techDetails: [
                        { title: 'Extensions (Gemini)', desc: 'Proprietäre Tools für Google Workspace (Gmail, Drive, Maps).' },
                        { title: 'Connectors (Claude)', desc: 'Enterprise-Verbindungen für Business-Software (Jira, Salesforce).' },
                        { title: 'Model Context Protocol (MCP)', desc: 'Offener Standard für lokale Daten & Datenbanken.' }
                    ]
                },
                {
                    id: 'rag',
                    title: 'Firmenwissen',
                    subtitle: 'Archiv',
                    icon: <FileTextIcon className="w-8 h-8 md:w-10 md:h-10 text-red-400" />,
                    color: 'border-red-500 shadow-red-500/20',
                    pos: positions.rag,
                    description: 'Die Möglichkeit, Dokumente (PDFs, Richtlinien) direkt hochzuladen, damit der Agent nicht halluziniert, sondern Fakten nutzt.',
                    analogy: 'Der Mitarbeiter geht zum Aktenschrank, liest die Richtlinie und antwortet erst dann.',
                    example: 'Frage an KI: "Wie viel Spesen darf ich abrechnen?" (KI liest in der PDF nach).',
                    techDetails: [
                        { title: 'Retrieval Augmented Generation (RAG)', desc: 'Ein Verfahren, das die Textgenerierung mit einer vorherigen Suche in einer Wissensdatenbank kombiniert, um faktenbasierte Antworten zu liefern.' }
                    ]
                }
            ];

            const activeContent = concepts.find(c => c.id === activeId);

            return (
                /* Main Container: Flex Col to separate Header and Map Area */
                <div className="flex flex-col h-screen w-screen overflow-hidden bg-slate-900">

                    {/* Header: Static block, z-index above map elements */}
                    <div className="shrink-0 p-4 md:pt-8 text-center z-20 relative bg-slate-900 shadow-md">
                        <h1 className="text-xl md:text-3xl font-bold text-slate-300 tracking-tight">KI-Grundlagen: Das Netzwerk</h1>
                        <p className="text-slate-500 text-xs md:text-base mt-1 md:mt-2">Tippen Sie auf einen Knoten für Details</p>
                    </div>

                    {/* Map Area: Takes remaining space, relative positioning for nodes */}
                    <div className="flex-1 relative w-full overflow-hidden">

                        {/* SVG Lines Layer */}
                        <svg className="connections-svg">
                            <line x1={`${positions.agent.x}%`} y1={`${positions.agent.y}%`} x2={`${positions.model.x}%`} y2={`${positions.model.y}%`} className="connection-line" />
                            <line x1={`${positions.agent.x}%`} y1={`${positions.agent.y}%`} x2={`${positions.gem.x}%`} y2={`${positions.gem.y}%`} className="connection-line" />
                            <line x1={`${positions.agent.x}%`} y1={`${positions.agent.y}%`} x2={`${positions.extensions.x}%`} y2={`${positions.extensions.y}%`} className="connection-line" />
                            <line x1={`${positions.agent.x}%`} y1={`${positions.agent.y}%`} x2={`${positions.rag.x}%`} y2={`${positions.rag.y}%`} className="connection-line" />
                        </svg>

                        {/* Nodes */}
                        {concepts.map((item) => (
                            <div
                                key={item.id}
                                className="node-container"
                                style={{ left: `${item.pos.x}%`, top: `${item.pos.y}%` }}
                                onClick={() => setActiveId(item.id)}
                            >
                                <div className={`node-circle w-16 h-16 md:w-20 md:h-20 ${item.color} ${item.isCenter ? 'agent-pulse border-blue-400' : 'bg-slate-800'}`}>
                                    {item.icon}
                                </div>
                                <div className="node-label">
                                    <div className="text-slate-200 text-xs md:text-sm">{item.title}</div>
                                    <div className="text-slate-500 text-[10px] md:text-xs uppercase tracking-wider">{item.subtitle}</div>
                                </div>
                            </div>
                        ))}
                    </div>

                    {/* Overlay / Modal */}
                    <div className={`overlay-backdrop ${activeId ? 'active' : ''}`} onClick={() => setActiveId(null)}>
                        {activeContent && (
                            <div className="overlay-content relative" onClick={(e) => e.stopPropagation()}>

                                {/* Close Button - FIXED POSITION relative to overlay-content container */}
                                <button
                                    onClick={() => setActiveId(null)}
                                    className="absolute top-3 right-3 p-2 bg-slate-800 rounded-full hover:bg-slate-700 transition-colors text-slate-400 hover:text-white z-50 shadow-lg border border-slate-700"
                                >
                                    <XIcon className="w-5 h-5 md:w-6 md:h-6" />
                                </button>

                                {/* SCROLLABLE INNER AREA */}
                                <div className="overlay-scroll-area">
                                    {/* Header */}
                                    <div className="p-6 md:p-8 border-b border-slate-700 bg-gradient-to-r from-slate-900 to-slate-800">
                                        <div className="flex flex-col md:flex-row items-start md:items-center gap-4 md:gap-6">
                                            <div className="p-3 md:p-4 bg-slate-800 rounded-2xl border border-slate-600 shadow-lg">
                                                {React.cloneElement(activeContent.icon, { className: "w-8 h-8 md:w-10 md:h-10 text-white" })}
                                            </div>
                                            <div>
                                                <h2 className="text-2xl md:text-3xl font-bold text-white pr-8">{activeContent.title}</h2>
                                                <span className="inline-block mt-2 px-3 py-1 bg-slate-700 text-slate-300 rounded-full text-xs md:text-sm font-semibold uppercase tracking-wider">
                                                    {activeContent.subtitle}
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Content Body */}
                                    <div className="p-6 md:p-8 space-y-6 md:space-y-8 text-slate-300">
                                        <section>
                                            <h4 className="text-base md:text-lg font-bold text-blue-400 mb-2 md:mb-3 flex items-center gap-2">
                                                <InfoIcon className="w-5 h-5" />
                                                Was ist das?
                                            </h4>
                                            <p className="text-base md:text-lg leading-relaxed text-slate-300">
                                                {activeContent.description}
                                            </p>
                                        </section>

                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                                            <div className="bg-amber-900/20 p-4 md:p-5 rounded-xl border border-amber-900/50">
                                                <h4 className="font-bold text-amber-400 mb-2">Büro-Analogie</h4>
                                                <p className="text-sm md:text-base text-amber-200/80">{activeContent.analogy}</p>
                                            </div>

                                            <div className="bg-indigo-900/20 p-4 md:p-5 rounded-xl border border-indigo-900/50">
                                                <h4 className="font-bold text-indigo-400 mb-2">Beispiel</h4>
                                                <p className="text-sm md:text-base text-indigo-200/80">{activeContent.example}</p>
                                            </div>
                                        </div>

                                        {/* Tech Term Footer */}
                                        <div className="pt-6 mt-6 border-t border-slate-700">
                                            <p className="text-xs text-slate-500 uppercase tracking-widest font-bold mb-3">
                                                Technische Begriffe
                                            </p>

                                            {/* Dynamic Grid: 1 col for 1 item, 2 cols for 2 items, 3 cols for 3 items */}
                                            {activeContent.techDetails ? (
                                                <div className={`grid grid-cols-1 gap-3 md:gap-4 ${activeContent.techDetails.length === 1 ? 'md:grid-cols-1' :
                                                        activeContent.techDetails.length === 2 ? 'md:grid-cols-2' :
                                                            'md:grid-cols-3'
                                                    }`}>
                                                    {activeContent.techDetails.map((item, idx) => (
                                                        <div key={idx} className="bg-slate-900/50 border border-slate-700 p-3 md:p-4 rounded-lg flex flex-col justify-center">
                                                            <span className="text-green-400 font-mono text-xs md:text-sm font-bold mb-1 block">
                                                                {item.title}
                                                            </span>
                                                            <span className="text-slate-400 text-xs leading-snug">
                                                                {item.desc}
                                                            </span>
                                                        </div>
                                                    ))}
                                                </div>
                                            ) : (
                                                /* Fallback (should not be reached with current data) */
                                                <code className="font-mono text-xs md:text-sm text-green-400 bg-slate-900 px-3 py-1 rounded border border-slate-700 inline-block break-all">
                                                    {activeContent.techTerm}
                                                </code>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>